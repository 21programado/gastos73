<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Mis Gastos Mensuales</title>
    <link rel="manifest" href="manifest.json">
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }
        
        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            background: #f8f9fa;
            color: #333;
            line-height: 1.6;
            padding: 20px;
            max-width: 800px;
            margin: 0 auto;
        }
        
        header {
            background: #2c3e50;
            color: white;
            padding: 20px;
            border-radius: 8px;
            margin-bottom: 20px;
            text-align: center;
        }
        
        .mes-navegacion {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 20px;
            background: white;
            padding: 15px;
            border-radius: 8px;
            box-shadow: 0 2px 4px rgba(0,0,0,0.1);
        }
        
        .btn {
            background: #3498db;
            color: white;
            border: none;
            padding: 10px 20px;
            border-radius: 4px;
            cursor: pointer;
            font-size: 16px;
            transition: background 0.3s;
        }
        
        .btn:hover {
            background: #2980b9;
        }
        
        .mes-actual {
            font-size: 18px;
            font-weight: bold;
        }
        
        .total-mes {
            background: #27ae60;
            color: white;
            padding: 15px;
            border-radius: 8px;
            text-align: center;
            margin-bottom: 20px;
            font-size: 20px;
            font-weight: bold;
        }
        
        .lista-gastos {
            display: grid;
            gap: 10px;
            margin-bottom: 30px;
        }
        
        .gasto-item {
            background: white;
            padding: 15px;
            border-radius: 6px;
            border-left: 4px solid #3498db;
            display: flex;
            justify-content: space-between;
            align-items: center;
            box-shadow: 0 1px 3px rgba(0,0,0,0.1);
        }
        
        .gasto-item.pagado {
            border-left-color: #27ae60;
            opacity: 0.8;
        }
        
        .gasto-info h3 {
            margin-bottom: 5px;
        }
        
        .gasto-monto {
            font-size: 18px;
            font-weight: bold;
        }
        
        .gasto-acciones {
            display: flex;
            gap: 5px;
        }
        
        .btn-editar, .btn-eliminar {
            padding: 5px 10px;
            font-size: 14px;
        }
        
        .btn-editar { background: #f39c12; }
        .btn-eliminar { background: #e74c3c; }
        
        .formulario-gasto {
            background: white;
            padding: 20px;
            border-radius: 8px;
            box-shadow: 0 2px 4px rgba(0,0,0,0.1);
        }
        
        .form-group {
            margin-bottom: 15px;
        }
        
        label {
            display: block;
            margin-bottom: 5px;
            font-weight: 500;
        }
        
        input, select {
            width: 100%;
            padding: 10px;
            border: 1px solid #ddd;
            border-radius: 4px;
            font-size: 16px;
        }
        
        .campos-cuotas {
            display: none;
            animation: fadeIn 0.3s;
        }
        
        @keyframes fadeIn {
            from { opacity: 0; }
            to { opacity: 1; }
        }
        
        .btn-submit {
            background: #2c3e50;
            width: 100%;
            padding: 12px;
            font-size: 18px;
        }
        
        .oculto {
            display: none;
        }
        
        @media (max-width: 600px) {
            body {
                padding: 10px;
            }
            
            .gasto-item {
                flex-direction: column;
                align-items: flex-start;
                gap: 10px;
            }
            
            .gasto-acciones {
                align-self: flex-end;
            }
        }
    </style>
</head>
<body>
    <header>
        <h1>üìä Control de Gastos Mensuales</h1>
    </header>
    
    <div class="mes-navegacion">
        <button class="btn" id="btnAnterior">‚óÄ Mes Anterior</button>
        <div class="mes-actual" id="mesActual">Enero 2024</div>
        <button class="btn" id="btnSiguiente">Mes Siguiente ‚ñ∂</button>
    </div>
    
    <div class="total-mes" id="totalMes">Total: $0.00</div>
    
    <div class="lista-gastos" id="listaGastos">
        <!-- Los gastos se cargar√°n aqu√≠ -->
    </div>
    
    <div class="formulario-gasto" id="formularioGasto">
        <h2>Agregar Nuevo Gasto</h2>
        <form id="formGasto">
            <div class="form-group">
                <label for="descripcion">Descripci√≥n *</label>
                <input type="text" id="descripcion" required>
            </div>
            
            <div class="form-group">
                <label for="monto">Monto (opcional, default 0)</label>
                <input type="number" id="monto" min="0" step="0.01">
            </div>
            
            <div class="form-group">
                <label for="tipo">Tipo *</label>
                <select id="tipo" required>
                    <option value="Fijo">Fijo (todos los meses)</option>
                    <option value="Cuotas">Cuotas</option>
                </select>
            </div>
            
            <div class="campos-cuotas" id="camposCuotas">
                <div class="form-group">
                    <label for="cuotas">Total de Cuotas</label>
                    <input type="number" id="cuotas" min="2" value="2">
                </div>
            </div>
            
            <div class="form-group">
                <label for="mes_inicio">Mes de Inicio *</label>
                <input type="month" id="mes_inicio" required>
            </div>
            
            <div class="campos-cuotas" id="campoMesFin">
                <div class="form-group">
                    <label for="mes_fin">Mes de Fin (solo cuotas)</label>
                    <input type="month" id="mes_fin">
                </div>
            </div>
            
            <div class="form-group">
                <label for="estado">Estado</label>
                <select id="estado">
                    <option value="Pendiente">Pendiente</option>
                    <option value="Pagado">Pagado</option>
                </select>
            </div>
            
            <button type="submit" class="btn btn-submit">üíæ Guardar Gasto</button>
            <button type="button" class="btn" id="btnCancelar" style="margin-top: 10px; background: #95a5a6;">Cancelar</button>
        </form>
    </div>
    
<script>
// CONFIG - PON TU URL AQU√ç
const API_URL = 'https://script.google.com/macros/s/AKfycbyxZYiJG0EooZcx_kYc5zavzOZBL7evm18uAMdlUKnyY2gGAbNsTGWsCLqqvojVG88I/exec';
let mesActual = '2024-01';

async function testAPI() {
    console.log('Probando conexi√≥n con:', API_URL);
    
    try {
        // Test simple GET
        const response = await fetch(`${API_URL}?accion=obtener_mes&mes=2024-01`);
        console.log('Response status:', response.status);
        console.log('Response headers:', response.headers);
        
        const data = await response.json();
        console.log('Datos recibidos:', data);
        
        alert('‚úÖ Conexi√≥n exitosa! Puedes ver detalles en la consola (F12)');
        
    } catch (error) {
        console.error('‚ùå Error detallado:', error);
        
        // M√°s info del error
        const testUrl = `${API_URL}?accion=obtener_mes&mes=2024-01`;
        console.log('URL probada:', testUrl);
        
        alert(`‚ùå Error de conexi√≥n:\n${error.message}\n\nRevisa la consola (F12) para m√°s detalles`);
    }
}

// Ejecutar test al cargar
document.addEventListener('DOMContentLoaded', testAPI);
</script>
</body>

</html>
